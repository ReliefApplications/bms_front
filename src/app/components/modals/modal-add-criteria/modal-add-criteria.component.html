<h4 mat-dialog-title class="modal-title underline-accent"
    [ngClass]="{'rtl':language.direction === 'rtl'}">
    {{language.modal_add_title |uppercaseFirst }} {{criteria.title | uppercaseFirst}}</h4>
<mat-dialog-content class="modal-container" *ngIf="criteria">
    <form [formGroup]="form">
        <table class="modal-table" cdkFocusRegionStart [ngClass]="{'rtl':language.direction === 'rtl'}">
            <tr class="modal-row">
                <th class="table-title">{{ criteria.fields.field.title | uppercaseFirst }}</th>
                <td class="form-item">
                    <ng-select formControlName="field" [placeholder]="criteria.fields.field.title | uppercaseFirst"
                        (change)="loadConditions($event)">
                        <ng-option *ngFor="let option of criteria.getOptions('field')" [value]="option.get('field')">
                            {{option.get('field') | formatCamelCase }}
                        </ng-option>
                    </ng-select>
                    <app-hint-error [form]="form" fieldName="field" [field]="criteria.fields.field"
                        [isMatField]="false"></app-hint-error>
                </td>
            </tr>

            <tr class="modal-row"
                *ngIf="form.controls.field.value !== 'IDPoor' || form.controls.field.value !== 'equityCardNo'">
                <th class="table-title">{{ criteria.fields.condition.title  | uppercaseFirst }}</th>
                <td class="form-item">
                    <mat-form-field class="full-width">
                        <mat-select formControlName="condition"
                            [placeholder]="criteria.fields.condition.title | uppercaseFirst">
                            <mat-option *ngFor="let option of criteria.getOptions('condition')"
                                [value]="option.get('name')">
                                {{option.get('name') | uppercaseFirst}}
                            </mat-option>
                        </mat-select>
                        <app-hint-error [form]="form" fieldName="condition" [field]="criteria.fields.condition"
                            [isMatField]="true"></app-hint-error>
                    </mat-form-field>
                </td>
            </tr>

            <tr class="modal-row"
                *ngIf="form.controls.field.value === 'gender' || form.controls.field.value === 'dateOfBirth' || form.controls.field.value === 'IDPoor' || form.controls.field.value === 'equityCardNo'">
                <th class="table-title">{{ criteria.fields.value.title  | uppercaseFirst }}</th>
                <td class="form-item">
                    <ng-select *ngIf="form.controls.field.value === 'gender'" class="single-select"
                        formControlName="value" [closeOnSelect]="true" [searchable]="true">
                        <ng-option *ngFor="let gender of criteria.genders" [value]="gender.get('id')">
                            {{gender.get('name')}}</ng-option>
                    </ng-select>
                    <app-hint-error [form]="form" fieldName="value" [field]="criteria.fields.value"
                        [isMatField]="false"></app-hint-error>

                    <mat-form-field class="full-width" *ngIf="form.controls.field.value === 'dateOfBirth'">
                        <input formControlName="value" matInput [matDatepicker]="date">
                        <mat-datepicker-toggle matSuffix [for]="date"></mat-datepicker-toggle>
                        <mat-datepicker #date></mat-datepicker>
                        <app-hint-error [form]="form" fieldName="value" [field]="criteria.fields.value"
                            [isMatField]="true"></app-hint-error>
                    </mat-form-field>

                    <mat-form-field class="full-width"
                        *ngIf="form.controls.field.value === 'IDPoor' || form.controls.field.value === 'equityCardNo'">
                        <input formControlName="value" matInput type="text">
                        <app-hint-error [form]="form" fieldName="value" [field]="criteria.fields.value"
                            [isMatField]="true"></app-hint-error>
                    </mat-form-field>

                </td>
            </tr>
            <tr class="modal-row">
                <th class="table-title"></th>
                <th class="table-value advanced-icon-wrapper">
                    <div class="advanced-icon">
                        <button mat-button class="button-text-accent" (click)="changeDisplay()">
                            <span>{{ language.add_distribution_advanced_option | uppercaseFirst}}</span>
                            <mat-icon>{{ iconAdvanced }}</mat-icon>
                        </button>
                    </div>
                </th>
            </tr>
            <tr *ngIf="displayWeight" class="modal-row">
                <th class="table-title">{{criteria.fields.weight.title | uppercaseFirst }}</th>

                <th class="table-value">
                    <mat-form-field class="full-width">
                        <input matInput formControlName="weight" type="number" min="0">
                    </mat-form-field>
                </th>
            </tr>
        </table>
    </form>
</mat-dialog-content>
<mat-dialog-actions >
    <div class="modal-button action-buttons" [ngClass]="{'rtl':language.direction === 'rtl'}">
        <button mat-button (click)="onCancel()" class="button-text-accent">{{language.cancel}}</button>
        <button mat-raised-button [disabled]="!form.valid" (click)="onSubmit()"
            class="button-background-accent">{{language.save}}</button>
    </div>
</mat-dialog-actions>

import { TextModelField } from './CustomModel/text-model-field';
import { NumberModelField } from './CustomModel/number-model-field';
import { CustomModel } from './CustomModel/custom-model';

export class VulnerabilityCriteria extends CustomModel {
    matSortActive = 'name';

    public fields = {
        id: new NumberModelField(
            {
                // Not displayed anywhere
            }
        ),
        name: new TextModelField(
            {

            }
        )
    };

    public static apiToModel(vulneratbilityFromApi): VulnerabilityCriteria {
        const newVulnerability = new VulnerabilityCriteria();
        newVulnerability.set('id', vulneratbilityFromApi.id);
        newVulnerability.set('name', vulneratbilityFromApi.field_string);
        return newVulnerability;
    }

    public modelToApi(): Object {
        return {
            id: this.get('id'),
            field_string: this.get('name')
        };
    }

    public getImage(): string {
        const vulnerabilityImages: object = {
            'pregnant': 'pregnant',
            'disabled': 'disabled',
            'lactating': 'lactating',
            'solo parent': 'solo-parent',
            'nutritional issues': 'nutritional-issues',
        };
        if (typeof this.get('name') === 'string') {
            return `/assets/images/households/${vulnerabilityImages[this.get<string>('name')]}.png`;
        } else {
            return '';
        }
    }
}

<div class="page-container">
  <div class="container-title">
    <h2>{{language.voucher | uppercaseFirst}}</h2>
  </div>

  <div class="container-table">
    <div class="container-content box-primary">
      <div class="content-button">
        <div class="action-buttons">
          <button mat-raised-button *ngIf="checkedElements.length > 0" class="button-background-primary action-button" (click)="printMany()" [matBadge]="checkedElements.length">
              <span>{{language.voucher_print_selection | uppercaseFirst}}</span>
          </button>
          <button mat-raised-button [disabled]="!bookletData" *ngIf="!loadingAssign" class="button-background-primary action-button" (click)="openAssignDialog()">
              <span>{{language.voucher_assign | uppercaseFirst }}</span>
          </button>
          <mat-spinner [diameter]='35' *ngIf="loadingAssign"></mat-spinner>
          <div class="button-with-extension" [ngClass]="{'rtl':language.direction === 'rtl'}">
            <button mat-raised-button [disabled]="!bookletData" class="button-background-primary" (click)="export()" *ngIf="!loadingExport">
              <mat-icon>get_app</mat-icon>
              <span>{{language.export | uppercaseFirst}}</span>
            </button>
            <mat-spinner [diameter]='35' *ngIf="loadingExport"></mat-spinner>
            <div class="extension">
              <button mat-raised-button class="dropdown button-background-primary" *ngIf="!loadingExport" [disabled]="!bookletData" [matMenuTriggerFor]="exportType">
                <mat-icon>keyboard_arrow_down</mat-icon>
              </button>
              <mat-menu #exportType>
                <button mat-menu-item (click)="setType('xls')"> .xls <mat-icon *ngIf="extensionType=='xls'">done</mat-icon>
                </button>
                <button mat-menu-item (click)="setType('csv')"> .csv <mat-icon *ngIf="extensionType=='csv'">done</mat-icon>
                </button>
                <button mat-menu-item (click)="setType('ods')"> .ods <mat-icon *ngIf="extensionType=='ods'">done</mat-icon>
                </button>
              </mat-menu>
            </div>
          </div>

          <div class="button-with-extension" [ngClass]="{'rtl':language.direction === 'rtl'}">
              <button mat-raised-button [disabled]="!bookletData" class="button-background-primary" (click)="exportCodes()" *ngIf="!loadingExportCodes">
                <mat-icon>get_app</mat-icon>
                <span>{{language.booklet_export_codes | uppercaseFirst}}</span>
              </button>
              <mat-spinner [diameter]='35' *ngIf="loadingExportCodes"></mat-spinner>
              <div class="extension" *ngIf="!loadingExportCodes">
                <button mat-raised-button class="dropdown button-background-primary" [disabled]="!bookletData" [matMenuTriggerFor]="exportCodesType">
                  <mat-icon>keyboard_arrow_down</mat-icon>
                </button>
                <mat-menu #exportCodesType>
                  <button mat-menu-item (click)="setTypeCode('xls')"> .xls <mat-icon *ngIf="extensionTypeCode=='xls'">done</mat-icon>
                  </button>
                  <button mat-menu-item (click)="setTypeCode('csv')"> .csv <mat-icon *ngIf="extensionTypeCode=='csv'">done</mat-icon>
                  </button>
                  <button mat-menu-item (click)="setTypeCode('ods')"> .ods <mat-icon *ngIf="extensionTypeCode=='ods'">done</mat-icon>
                  </button>
                  <button mat-menu-item (click)="setTypeCode('pdf')"> .pdf <mat-icon *ngIf="extensionTypeCode=='pdf'">done</mat-icon>
                  </button>
                </mat-menu>
              </div>
            </div>
        </div>

        <button mat-raised-button *ngIf="currentDisplayType.type !== 'mobile'" (click)="openDialog({action: 'add'})" class="add-button-create">
          <mat-icon>add</mat-icon>
          {{language.add | uppercaseFirst}}
        </button>
        <button mat-fab *ngIf="currentDisplayType.type === 'mobile'" (click)="openDialog({action: 'add'})" class="add-button"
          [ngClass]="{'add-button-rtl': language.direction === 'rtl'}">
          <mat-icon>add</mat-icon>
        </button>
      </div>

      <div class="content-table">
        <app-table [isLoading]="loadingBooklet" [searchable]="true" [paginable]="true" *ngIf="currentDisplayType.type !== 'mobile'" [entity]="bookletClass" [service]="bookletService"
          [data]="bookletData" [selection]="selection" (selectChecked)="getChecked($event)" [selectable]="true"
          [editable]="true" [deletable]="true" (openModal)="openDialog($event)" [printable]="true" (printOne)="print($event)"></app-table>
        <app-table-mobile [isLoading]="loadingBooklet" *ngIf="currentDisplayType.type === 'mobile'" [entity]="bookletClass" [service]="bookletService"
          [data]="bookletData" [editable]="true" [deletable]="true" (openModal)="openDialog($event)" [printable]="true" (printOne)="print($event)"></app-table-mobile>
      </div>
    </div>
  </div>
</div>
